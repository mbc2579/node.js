<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="/main.css" rel="stylesheet">
</head>
    <body class="grey-bg">

        <!--
        %ÏùÄ htmlÏÇ¨Ïù¥Ïóê ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ Î¨∏Î≤ïÏùÑ Ïì∏ Îïå ÏÇ¨Ïö©
        %-ÏùÄ includeÎ¨∏Î≤ï Í∞ôÏùÄÍ±∞ Ïì∏ Îïå ÏÇ¨Ïö©
        %=ÏùÄ %-Îûë Ïú†ÏÇ¨ÌïòÏßÄÎßå %= ÏÇ¨Ïù¥Ïóê Îç∞Ïù¥ÌÑ∞Í∞Ä html ÌååÏùºÏù¥ÎùºÍ≥† Í∞ÄÏ†ïÌïòÎ©¥ %=ÏùÄ Îì§Ïñ¥Í∞Ñ Îç∞Ïù¥ÌÑ∞Í∞Ä Í≥†ÎåÄÎ°ú ÎÇòÏò§ÏßÄÎßå %-ÏùÄ Ïã§Ï†ú htmlÏ≤òÎüº Ï∂úÎ†•Îê®

        include()Î•º Ïì∞Î©¥ Îã§Î•∏ ejsÌååÏùºÏóê ÏûàÎçò html Î≥µÏÇ¨Ìï¥Ïò¨ Ïàò ÏûàÏùå
        -->

        <%- include('nav.ejs') %>

        <div class="white-bg">
            <!--htmlÏÇ¨Ïù¥Ïóê ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ Î¨∏Î≤ïÏùÑ Ïì∞Î†§Î©¥ % Ïó¨Í∏∞ÏïàÏóê ÏûëÏÑ± %-->
            <% for(let i = 0; i < posts.length; i++) { %>
                <div class="list-box">
                    <!-- ÏÑúÎ≤Ñ Îç∞Ïù¥ÌÑ∞Î•º ejsÌååÏùºÏóê ÎÑ£ÏúºÎ†§Î©¥?
                    1. ejsÌååÏùºÎ°ú Îç∞Ïù¥ÌÑ∞ Ï†ÑÏÜ°
                    2. ejsÌååÏùº ÏïàÏóêÏÑú %=Îç∞Ïù¥ÌÑ∞Ïù¥Î¶Ñ% -->
                    <h4><a href="/detail/<%=posts[i]._id%>"><%= posts[i].title %></a> <a href="/edit/<%=posts[i]._id %>">‚úèÔ∏è</a> <span class="delete" data-id="<%= posts[i]._id %>"> üóëÔ∏è </span> </h4>
                    <p><%= posts[i].content %></p>
                </div>
            <% } %>
        </div> 

        <script>
            document.querySelectorAll('.delete')[0].addEventListener('click', function(e) {
                e.target.dataset.id
                fetch('/delete?docid=' + e.target.dataset.id, {
                    method : 'DELETE'
                })
            })

            document.querySelectorAll('.delete')[1].addEventListener('click', function(e) {
                e.target.dataset.id
                fetch('/delete?docid=' + e.target.dataset.id, {
                    method : 'DELETE'
                })
            })
        </script>
    </body>
</html>